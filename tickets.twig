{% extends "base.twig" %}

{% block title %}Ticket Management - Ticket App{% endblock %}

{% block content %}
<section class="tickets-page">
  <h2>ðŸŽ« Ticket Management</h2>
  <p>Manage all your tickets here â€” create new ones, edit existing ones, or delete completed ones.</p>

  <!-- CREATE FORM -->
  <form id="ticketForm" class="ticket-form">
    <h3>Create New Ticket</h3>

    <label for="title">Title *</label>
    <input type="text" id="title" name="title" placeholder="Enter ticket title" required>

    <label for="status">Status *</label>
    <select id="status" name="status" required>
      <option value="">Select status</option>
      <option value="open">Open</option>
      <option value="in_progress">In Progress</option>
      <option value="closed">Closed</option>
    </select>

    <label for="description">Description</label>
    <textarea id="description" name="description" placeholder="Enter description (optional)"></textarea>

    <button type="submit" class="btn-primary">Create Ticket</button>
  </form>

  <hr>

  <!-- DISPLAY TICKETS -->
  <div id="ticketList" class="ticket-list">
    <h3>All Tickets</h3>
    <!-- Tickets will appear here -->
  </div>
</section>

<script>
  const form = document.getElementById("ticketForm");
  const ticketList = document.getElementById("ticketList");

  let tickets = [];

  // Handle Form Submission
  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const title = document.getElementById("title").value.trim();
    const status = document.getElementById("status").value;
    const description = document.getElementById("description").value.trim();

    if (!title || !status) {
      alert("Title and Status are required!");
      return;
    }

    const newTicket = {
      id: Date.now(),
      title,
      status,
      description
    };

    tickets.push(newTicket);
    renderTickets();
    form.reset();
  });

  // Render Tickets
  function renderTickets() {
    ticketList.innerHTML = "<h3>All Tickets</h3>";
    if (tickets.length === 0) {
      ticketList.innerHTML += "<p>No tickets yet. Create one above.</p>";
      return;
